\doxysection{esp3/\+esp3.ino File Reference}
\hypertarget{esp3_8ino}{}\label{esp3_8ino}\index{esp3/esp3.ino@{esp3/esp3.ino}}


Door actuator, buzzer, and LED controller with MQTT integration.  


Include dependency graph for esp3.\+ino:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \doxymbox{\hyperlink{esp3_8ino_structBuzzerPattern}{Buzzer\+Pattern}}
\begin{DoxyCompactList}\small\item\em Describes a buzzer sound pattern.  \doxymbox{\hyperlink{esp3_8ino_structBuzzerPattern}{More...}}\end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\+\#define \doxymbox{\hyperlink{esp3_8ino_aae89f73e4cdcb650ae5c585818d3a861}{POT\+\_\+\+PIN}}~A0
\begin{DoxyCompactList}\small\item\em Analog pin for potentiometer (admin servo control). \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}{Access\+Result}} :\+ uint8\+\_\+t \{ \doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}{Denied}}
, \doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}{Granted}}
, \doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}{Denied}}
, \doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}{Granted}}
 \}
\begin{DoxyCompactList}\small\item\em Access result enumeration. \end{DoxyCompactList}\item 
enum \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176}{Buzzer\+State}} \{ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\+\_\+\+IDLE}}
, \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}{BUZZER\+\_\+\+ON}}
, \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a6fd00a9b64a658134b21162400027a68}{BUZZER\+\_\+\+OFF}}
 \}
\begin{DoxyCompactList}\small\item\em Buzzer state enumeration. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \doxymbox{\hyperlink{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}{play\+Pattern}} (const unsigned int \texorpdfstring{$\ast$}{*}timings, uint8\+\_\+t length)
\begin{DoxyCompactList}\small\item\em Starts playing a buzzer pattern. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a312e25f84437a687662bb53eceebec83}{update\+Buzzer}} ()
\begin{DoxyCompactList}\small\item\em Advances the buzzer state machine. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}{stop\+Buzzer}} ()
\begin{DoxyCompactList}\small\item\em Immediately stops any active buzzer sound. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f}{play\+Lock\+Sound}} ()
\begin{DoxyCompactList}\small\item\em Plays lock sound pattern. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a979598b64139705fd13eb4ea50e0674c}{play\+Unlock\+Sound}} ()
\begin{DoxyCompactList}\small\item\em Plays unlock sound pattern. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6}{play\+Denied\+Sound}} ()
\begin{DoxyCompactList}\small\item\em Plays denied-\/access sound pattern. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100}{play\+Tap\+Sound}} ()
\begin{DoxyCompactList}\small\item\em Plays keypad tap sound. \end{DoxyCompactList}\item 
static void \doxymbox{\hyperlink{esp3_8ino_aff8c04e7b324ff4272911924db174640}{force\+Lock}} ()
\begin{DoxyCompactList}\small\item\em Forces the system into a locked idle state. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_ac3a129f66dc859e2b7279565f4e1de78}{callback}} (char \texorpdfstring{$\ast$}{*}topic, byte \texorpdfstring{$\ast$}{*}payload, unsigned int length)
\begin{DoxyCompactList}\small\item\em MQTT message callback handler. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Arduino setup function. \end{DoxyCompactList}\item 
void \doxymbox{\hyperlink{esp3_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Arduino main loop. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Wifi\+Mqtt\+Client \doxymbox{\hyperlink{esp3_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}
\begin{DoxyCompactList}\small\item\em Wi\+Fi + MQTT client wrapper. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_ae4ee394ecd24781bba5d0aaaab8e964a}{WIFI\+\_\+\+SSID}} \+[$\,$]\+ = "{}Mathias2.\+4"{}
\begin{DoxyCompactList}\small\item\em Wi\+Fi SSID. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_a0495958e0c537c1c5100ee272495435c}{WIFI\+\_\+\+PASS}} \+[$\,$]\+ = "{}mrbombasticcallmefantastic"{}
\begin{DoxyCompactList}\small\item\em Wi\+Fi password. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_a41c34e432b12a511f9348547ddae11d4}{MQTT\+\_\+\+HOST}} \+[$\,$]\+ = "{}maqiatto.\+com"{}
\begin{DoxyCompactList}\small\item\em MQTT broker hostname. \end{DoxyCompactList}\item 
constexpr uint16\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a993a7e0c0377e10146438ebe707f31d0}{MQTT\+\_\+\+PORT}} = 1883
\begin{DoxyCompactList}\small\item\em MQTT broker port. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_a315cd313c3f6301b48d2f67e63bec2db}{MQTT\+\_\+\+USER}} \+[$\,$]\+ = "{}hectorfoss@gmail.\+com"{}
\begin{DoxyCompactList}\small\item\em MQTT username. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_a31dacdc924feb376b49448eb843d053c}{MQTT\+\_\+\+PASS}} \+[$\,$]\+ = "{}potter"{}
\begin{DoxyCompactList}\small\item\em MQTT password. \end{DoxyCompactList}\item 
constexpr char \doxymbox{\hyperlink{esp3_8ino_a04ecc29c762e5b2844d3c24744813015}{DEVICE\+\_\+\+ID}} \+[$\,$]\+ = "{}door1"{}
\begin{DoxyCompactList}\small\item\em Unique device identifier used in MQTT topics. \end{DoxyCompactList}\item 
constexpr uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}{RED\+\_\+\+PIN}} = 4
\begin{DoxyCompactList}\small\item\em GPIO pin assignments. \end{DoxyCompactList}\item 
constexpr uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}{GREEN\+\_\+\+PIN}} = 0
\begin{DoxyCompactList}\small\item\em Green LED (unlocked). \end{DoxyCompactList}\item 
constexpr uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\+\_\+\+PIN}} = 14
\begin{DoxyCompactList}\small\item\em Piezo buzzer. \end{DoxyCompactList}\item 
constexpr uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a98714b3ea5db9fa78cbcf8891a3c0798}{SERVO\+\_\+\+PIN}} = 13
\begin{DoxyCompactList}\small\item\em Servo signal pin. \end{DoxyCompactList}\item 
constexpr uint32\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a6d6d37a1e68b6dcd10e646ed685f6f5e}{UNLOCK\+\_\+\+TIME\+\_\+\+MS}} = 5000
\begin{DoxyCompactList}\small\item\em Door unlock duration (ms). \end{DoxyCompactList}\item 
uint32\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a744e7cb284580272a7afb8a81f2a3bba}{unlock\+Until}} = 0
\begin{DoxyCompactList}\small\item\em Timestamp (ms) until which the door remains unlocked. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5}{unlocked}} = false
\begin{DoxyCompactList}\small\item\em Indicates whether the door is currently unlocked. \end{DoxyCompactList}\item 
\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}{Access\+Result}} \doxymbox{\hyperlink{esp3_8ino_a39d1ef76cb1d31fc16d855c63df5624a}{access\+Granted}}
\begin{DoxyCompactList}\small\item\em Result of keypad PIN verification. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{esp3_8ino_a037a56ba222296920d6e0f06796e9f21}{rfid\+Access}} = false
\begin{DoxyCompactList}\small\item\em Indicates whether RFID access was granted. \end{DoxyCompactList}\item 
Servo \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\+\_\+servo}}
\begin{DoxyCompactList}\small\item\em Servo instance controlling the lock mechanism. \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{esp3_8ino_ac981a10fb220aee90291389b2607c637}{servo\+Open}} = false
\begin{DoxyCompactList}\small\item\em Indicates whether the servo is currently in the open position. \end{DoxyCompactList}\item 
uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servo\+Angle}}
\begin{DoxyCompactList}\small\item\em Current servo angle (derived from potentiometer in admin mode). \end{DoxyCompactList}\item 
bool \doxymbox{\hyperlink{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}{admin\+Servo\+Control}} = false
\begin{DoxyCompactList}\small\item\em Enables direct servo control via potentiometer (admin mode). \end{DoxyCompactList}\item 
const unsigned int \doxymbox{\hyperlink{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03}{denied\+Timings}} \+[$\,$]\+
\begin{DoxyCompactList}\small\item\em Denied access:\+ single long beep. \end{DoxyCompactList}\item 
const unsigned int \doxymbox{\hyperlink{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb}{lock\+Timings}} \+[$\,$]\+
\begin{DoxyCompactList}\small\item\em Lock sound:\+ long-\/long-\/long pattern. \end{DoxyCompactList}\item 
const unsigned int \doxymbox{\hyperlink{esp3_8ino_af8884950ef523ca854f256d016cfaf29}{unlock\+Timings}} \+[$\,$]\+
\begin{DoxyCompactList}\small\item\em Unlock sound:\+ short-\/short pattern. \end{DoxyCompactList}\item 
const unsigned int \doxymbox{\hyperlink{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd}{beep\+Timings}} \+[$\,$]\+
\begin{DoxyCompactList}\small\item\em Keypad tap sound:\+ short beep. \end{DoxyCompactList}\item 
\doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176}{Buzzer\+State}} \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzer\+State}} = \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\+\_\+\+IDLE}}
\begin{DoxyCompactList}\small\item\em Current buzzer state. \end{DoxyCompactList}\item 
\doxymbox{\hyperlink{esp3_8ino_structBuzzerPattern}{Buzzer\+Pattern}} \doxymbox{\hyperlink{esp3_8ino_a3968694cac10b831396197bf7627d45c}{current\+Pattern}} = \{nullptr, 0\}
\begin{DoxyCompactList}\small\item\em Currently active buzzer pattern. \end{DoxyCompactList}\item 
uint8\+\_\+t \doxymbox{\hyperlink{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}{step\+Index}} = 0
\begin{DoxyCompactList}\small\item\em Index into the timing array. \end{DoxyCompactList}\item 
unsigned long \doxymbox{\hyperlink{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab}{last\+Change}} = 0
\begin{DoxyCompactList}\small\item\em Timestamp of last buzzer state change. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Door actuator, buzzer, and LED controller with MQTT integration. 



Definition in file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



\doxysubsection{Class Documentation}
\index{BuzzerPattern@{BuzzerPattern}}
\label{structBuzzerPattern}
\Hypertarget{esp3_8ino_structBuzzerPattern}
\doxysubsubsection{struct Buzzer\+Pattern}
Describes a buzzer sound pattern. 

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00170}{170}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\begin{DoxyFields}{Class Members}
\doxymbox{\Hypertarget{esp3_8ino_aa5a431c816b520d8df9dc3fb85d5c062}\label{esp3_8ino_aa5a431c816b520d8df9dc3fb85d5c062}} 
uint8\_t&
length&
Number of timing entries. \\
\hline

\doxymbox{\Hypertarget{esp3_8ino_a9973d8105ccaef4e92696ff202364a48}\label{esp3_8ino_a9973d8105ccaef4e92696ff202364a48}} 
const unsigned int \texorpdfstring{$\ast$}{*}&
timings&
Pointer to timing array. \\
\hline

\end{DoxyFields}


\label{doc-define-members}
\Hypertarget{esp3_8ino_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{esp3_8ino_aae89f73e4cdcb650ae5c585818d3a861}\index{esp3.ino@{esp3.ino}!POT\_PIN@{POT\_PIN}}
\index{POT\_PIN@{POT\_PIN}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{POT\_PIN}{POT\_PIN}}
{\footnotesize\ttfamily \label{esp3_8ino_aae89f73e4cdcb650ae5c585818d3a861} 
\+\#define POT\+\_\+\+PIN~A0}



Analog pin for potentiometer (admin servo control). 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00080}{80}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.



\label{doc-enum-members}
\Hypertarget{esp3_8ino_doc-enum-members}
\doxysubsection{Enumeration Type Documentation}
\Hypertarget{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}\index{esp3.ino@{esp3.ino}!AccessResult@{AccessResult}}
\index{AccessResult@{AccessResult}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{AccessResult}{AccessResult}}
{\footnotesize\ttfamily \label{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1} 
enum class \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}{Access\+Result}} :\+ uint8\+\_\+t\hspace{0.3cm}{\ttfamily [strong]}}



Access result enumeration. 

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Denied@{Denied}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!Denied@{Denied}}
}\Hypertarget{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}\label{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73} 
Denied&Access denied. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Granted@{Granted}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!Granted@{Granted}}
}\Hypertarget{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}\label{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db} 
Granted&Access granted. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Denied@{Denied}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!Denied@{Denied}}
}\Hypertarget{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}\label{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73} 
Denied&Access denied. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Granted@{Granted}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!Granted@{Granted}}
}\Hypertarget{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}\label{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db} 
Granted&Access granted. \\
\hline

\end{DoxyEnumFields}


Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00102}{102}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ uint8\_t\ \{}
\DoxyCodeLine{00103\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}{Denied}},\ \ \ }
\DoxyCodeLine{00104\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}{Granted}}\ \ \ }
\DoxyCodeLine{00105\ \};}

\end{DoxyCode}
\Hypertarget{esp3_8ino_ae3c5be103282ee46f635819ae28c1176}\index{esp3.ino@{esp3.ino}!BuzzerState@{BuzzerState}}
\index{BuzzerState@{BuzzerState}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{BuzzerState}{BuzzerState}}
{\footnotesize\ttfamily \label{esp3_8ino_ae3c5be103282ee46f635819ae28c1176} 
enum \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176}{Buzzer\+State}}}



Buzzer state enumeration. 

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{BUZZER\_IDLE@{BUZZER\_IDLE}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!BUZZER\_IDLE@{BUZZER\_IDLE}}
}\Hypertarget{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}\label{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd} 
BUZZER\+\_\+\+IDLE&No sound playing. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{BUZZER\_ON@{BUZZER\_ON}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!BUZZER\_ON@{BUZZER\_ON}}
}\Hypertarget{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}\label{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c} 
BUZZER\+\_\+\+ON&Buzzer currently active. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{BUZZER\_OFF@{BUZZER\_OFF}!esp3.ino@{esp3.ino}}
\index{esp3.ino@{esp3.ino}!BUZZER\_OFF@{BUZZER\_OFF}}
}\Hypertarget{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a6fd00a9b64a658134b21162400027a68}\label{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a6fd00a9b64a658134b21162400027a68} 
BUZZER\+\_\+\+OFF&Silent gap between beeps. \\
\hline

\end{DoxyEnumFields}


Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00161}{161}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00162\ \ \ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\_IDLE}},\ }
\DoxyCodeLine{00163\ \ \ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}{BUZZER\_ON}},\ \ \ }
\DoxyCodeLine{00164\ \ \ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a6fd00a9b64a658134b21162400027a68}{BUZZER\_OFF}}\ \ \ }
\DoxyCodeLine{00165\ \};}

\end{DoxyCode}


\label{doc-func-members}
\Hypertarget{esp3_8ino_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{esp3_8ino_ac3a129f66dc859e2b7279565f4e1de78}\index{esp3.ino@{esp3.ino}!callback@{callback}}
\index{callback@{callback}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily \label{esp3_8ino_ac3a129f66dc859e2b7279565f4e1de78} 
void callback (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{topic}{, }\item[{byte \texorpdfstring{$\ast$}{*}}]{payload}{, }\item[{unsigned int}]{length}{}\end{DoxyParamCaption})}



MQTT message callback handler. 

Handles:\+
\begin{DoxyItemize}
\item Keypad access responses (unlock /\+ deny)
\item RFID access denials
\item Keypad tap beep feedback
\item Admin servo control enable/\+disable
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em topic} & MQTT topic string. \\
\hline
{\em payload} & Raw payload bytes. \\
\hline
{\em length} & Payload length. \\
\hline
\end{DoxyParams}


Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00318}{318}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \textcolor{comment}{//\ Ignore\ empty\ MQTT\ messages}}
\DoxyCodeLine{00321\ \ \ \textcolor{keywordflow}{if}\ (length\ ==\ 0)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ StaticJsonDocument<512>\ doc;}
\DoxyCodeLine{00324\ \ \ DeserializationError\ err\ =\ deserializeJson(doc,\ payload,\ length);}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \textcolor{comment}{//\ Abort\ if\ JSON\ parsing\ fails}}
\DoxyCodeLine{00327\ \ \ \textcolor{keywordflow}{if}\ (err)\ \{}
\DoxyCodeLine{00328\ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}JSON\ parse\ failed:\ "{}});}
\DoxyCodeLine{00329\ \ \ \ \ Serial.println(err.c\_str());}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00331\ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00334\ \ \ \textcolor{comment}{//\ Keypad\ PIN\ verification\ response}}
\DoxyCodeLine{00335\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00336\ \ \ \textcolor{keywordflow}{if}\ (strcmp(topic,\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}access/keypad\_response"{}}).c\_str())\ ==\ 0)\ \{}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{comment}{//\ Ignore\ keypad\ responses\ during\ admin\ servo\ control}}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}{adminServoControl}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a39d1ef76cb1d31fc16d855c63df5624a}{accessGranted}}\ =\ (doc[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}accessGranted"{}}]\ |\ \textcolor{keyword}{false})}
\DoxyCodeLine{00342\ \ \ \ \ \ \ ?\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}{AccessResult::Granted}}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}{AccessResult}}::\doxymbox{\hyperlink{esp3_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}{Denied}};}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a39d1ef76cb1d31fc16d855c63df5624a}{accessGranted}}\ !=\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1ac322f9346b70efdd31968628d5ee68db}{AccessResult::Granted}})\ \{}
\DoxyCodeLine{00346\ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Access\ Denied"{}});}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6}{playDeniedSound}}();}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_aff8c04e7b324ff4272911924db174640}{forceLock}}();}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00350\ \ \ \ \ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{comment}{//\ Access\ granted:\ unlock\ door}}
\DoxyCodeLine{00353\ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Unlocking\ door"{}});}
\DoxyCodeLine{00354\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a979598b64139705fd13eb4ea50e0674c}{playUnlockSound}}();}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\_servo}}.write(180);\ \ \ \textcolor{comment}{//\ Move\ servo\ to\ unlocked\ position}}
\DoxyCodeLine{00357\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_ac981a10fb220aee90291389b2607c637}{servoOpen}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}{GREEN\_PIN}},\ HIGH);}
\DoxyCodeLine{00360\ \ \ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}{RED\_PIN}},\ LOW);}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5}{unlocked}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00363\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a744e7cb284580272a7afb8a81f2a3bba}{unlockUntil}}\ =\ millis()\ +\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6d6d37a1e68b6dcd10e646ed685f6f5e}{UNLOCK\_TIME\_MS}};}
\DoxyCodeLine{00364\ \ \ \}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00367\ \ \ \textcolor{comment}{//\ RFID\ access\ response\ (only\ react\ to\ denial)}}
\DoxyCodeLine{00368\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00369\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(topic,\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}access/response"{}}).c\_str())\ ==\ 0)\ \{}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_af8cd458b5a58130e8dd244de49f9591d}{rfidAccess}}\ =\ (doc[\textcolor{stringliteral}{"{}response"{}}][\textcolor{stringliteral}{"{}hasAccess"{}}]\ |\ \textcolor{keyword}{false})}
\DoxyCodeLine{00372\ \ \ \ \ \ \ ?\ \textcolor{keyword}{true}}
\DoxyCodeLine{00373\ \ \ \ \ \ \ :\ false;}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{esp1__rfid__motion_8ino_af8cd458b5a58130e8dd244de49f9591d}{rfidAccess}})\ \{}
\DoxyCodeLine{00376\ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Access\ Denied"{}});}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6}{playDeniedSound}}();}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_aff8c04e7b324ff4272911924db174640}{forceLock}}();}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00380\ \ \ \ \ \}}
\DoxyCodeLine{00381\ \ \ \}}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00384\ \ \ \textcolor{comment}{//\ Keypad\ tap\ feedback}}
\DoxyCodeLine{00385\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00386\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(topic,\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}keypad/beep"{}}).c\_str())\ ==\ 0)\ \{}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{comment}{//\ Only\ beep\ if\ RFID\ access\ is\ valid}}
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{esp1__rfid__motion_8ino_af8cd458b5a58130e8dd244de49f9591d}{rfidAccess}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100}{playTapSound}}();}
\DoxyCodeLine{00392\ \ \ \}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00395\ \ \ \textcolor{comment}{//\ Admin\ servo\ control\ enable/disable}}
\DoxyCodeLine{00396\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00397\ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (strcmp(topic,\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}admin/servo\_control"{}}).c\_str())\ ==\ 0)\ \{}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}{adminServoControl}}\ =\ (doc[\textcolor{stringliteral}{"{}data"{}}][\textcolor{stringliteral}{"{}adminServoControl"{}}]\ |\ \textcolor{keyword}{false})}
\DoxyCodeLine{00400\ \ \ \ \ \ \ ?\ \textcolor{keyword}{true}}
\DoxyCodeLine{00401\ \ \ \ \ \ \ :\ false;}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}{adminServoControl}})\ \{}
\DoxyCodeLine{00404\ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Admin\ servo\ control\ disabled"{}});}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_aff8c04e7b324ff4272911924db174640}{forceLock}}();\ \ \textcolor{comment}{//\ Reset\ servo\ to\ locked\ state}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00407\ \ \ \ \ \}}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Admin\ servo\ control\ enabled"{}});}
\DoxyCodeLine{00410\ \ \ \}}
\DoxyCodeLine{00411\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00149}{access\+Granted}}, \doxymbox{\hyperlink{esp3_8ino_source_l00123}{admin\+Servo\+Control}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00141}{Denied}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00142}{Granted}}, \doxymbox{\hyperlink{esp3_8ino_source_l00075}{GREEN\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00114}{lock\+\_\+servo}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00053}{net}}, \doxymbox{\hyperlink{esp3_8ino_source_l00264}{play\+Denied\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00271}{play\+Tap\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00257}{play\+Unlock\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00074}{RED\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00146}{rfid\+Access}}, \doxymbox{\hyperlink{esp3_8ino_source_l00117}{servo\+Open}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00118}{UNLOCK\+\_\+\+TIME\+\_\+\+MS}}, \doxymbox{\hyperlink{esp3_8ino_source_l00097}{unlocked}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00090}{unlock\+Until}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino_ac3a129f66dc859e2b7279565f4e1de78_cgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_aff8c04e7b324ff4272911924db174640}\index{esp3.ino@{esp3.ino}!forceLock@{forceLock}}
\index{forceLock@{forceLock}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{forceLock()}{forceLock()}}
{\footnotesize\ttfamily \label{esp3_8ino_aff8c04e7b324ff4272911924db174640} 
void force\+Lock (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Forces the system into a locked idle state. 


\begin{DoxyItemize}
\item Resets access state
\item Sets LEDs to "{}locked"{}
\item Moves servo to closed position if needed 
\end{DoxyItemize}

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00288}{288}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00289\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a39d1ef76cb1d31fc16d855c63df5624a}{accessGranted}}\ =\ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1a58d036b9b7f0e7eb38cfb90f1cc70a73}{AccessResult::Denied}};}
\DoxyCodeLine{00290\ \ \ \doxymbox{\hyperlink{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5}{unlocked}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}{RED\_PIN}},\ HIGH);}
\DoxyCodeLine{00293\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}{GREEN\_PIN}},\ LOW);}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_ac981a10fb220aee90291389b2607c637}{servoOpen}})\ \{}
\DoxyCodeLine{00296\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\_servo}}.write(0);\ \ \ \textcolor{comment}{//\ Move\ servo\ to\ locked\ position}}
\DoxyCodeLine{00297\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_ac981a10fb220aee90291389b2607c637}{servoOpen}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00298\ \ \ \}}
\DoxyCodeLine{00299\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00149}{access\+Granted}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00141}{Denied}}, \doxymbox{\hyperlink{esp3_8ino_source_l00075}{GREEN\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00114}{lock\+\_\+servo}}, \doxymbox{\hyperlink{esp3_8ino_source_l00074}{RED\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00117}{servo\+Open}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00097}{unlocked}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{esp3_8ino_aff8c04e7b324ff4272911924db174640_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_afe461d27b9c48d5921c00d521181f12f}\index{esp3.ino@{esp3.ino}!loop@{loop}}
\index{loop@{loop}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{esp3_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Arduino main loop. 

Handles:\+
\begin{DoxyItemize}
\item MQTT processing
\item Buzzer state machine updates
\item Servo admin override mode
\item Automatic relocking after timeout 
\end{DoxyItemize}

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00484}{484}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00485\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.loop();}
\DoxyCodeLine{00486\ \ \ yield();}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \textcolor{comment}{//\ Advance\ buzzer\ state\ machine}}
\DoxyCodeLine{00489\ \ \ \doxymbox{\hyperlink{esp3_8ino_a312e25f84437a687662bb53eceebec83}{updateBuzzer}}();}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00492\ \ \ \textcolor{comment}{//\ Admin\ servo\ control\ mode}}
\DoxyCodeLine{00493\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00494\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}{adminServoControl}})\ \{}
\DoxyCodeLine{00495\ }
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{comment}{//\ Map\ potentiometer\ value\ to\ servo\ angle}}
\DoxyCodeLine{00497\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servoAngle}}\ =\ (int)(analogRead(\doxymbox{\hyperlink{esp3_8ino_aae89f73e4cdcb650ae5c585818d3a861}{POT\_PIN}})\ /\ 1023.0f\ *\ 180.0f);}
\DoxyCodeLine{00498\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servoAngle}}\ =\ constrain(\doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servoAngle}},\ 0,\ 180);}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\_servo}}.write(\doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servoAngle}});}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00502\ \ \ \}}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00505\ \ \ \textcolor{comment}{//\ Automatic\ relock\ after\ unlock\ timeout}}
\DoxyCodeLine{00506\ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00507\ \ \ \textcolor{keyword}{const}\ uint32\_t\ now\ =\ millis();}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00509\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5}{unlocked}}\ \&\&\ (int32\_t)(now\ -\/\ \doxymbox{\hyperlink{esp3_8ino_a744e7cb284580272a7afb8a81f2a3bba}{unlockUntil}})\ >=\ 0)\ \{}
\DoxyCodeLine{00510\ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Locking\ door"{}});}
\DoxyCodeLine{00511\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f}{playLockSound}}();}
\DoxyCodeLine{00512\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_aff8c04e7b324ff4272911924db174640}{forceLock}}();}
\DoxyCodeLine{00513\ \ \ \}}
\DoxyCodeLine{00514\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00123}{admin\+Servo\+Control}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00114}{lock\+\_\+servo}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00053}{net}}, \doxymbox{\hyperlink{esp3_8ino_source_l00250}{play\+Lock\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00080}{POT\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00120}{servo\+Angle}}, \doxymbox{\hyperlink{esp3_8ino_source_l00097}{unlocked}}, \doxymbox{\hyperlink{esp3_8ino_source_l00090}{unlock\+Until}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino_afe461d27b9c48d5921c00d521181f12f_cgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6}\index{esp3.ino@{esp3.ino}!playDeniedSound@{playDeniedSound}}
\index{playDeniedSound@{playDeniedSound}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{playDeniedSound()}{playDeniedSound()}}
{\footnotesize\ttfamily \label{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6} 
void play\+Denied\+Sound (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Plays denied-\/access sound pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00264}{264}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \doxymbox{\hyperlink{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}{stopBuzzer}}();}
\DoxyCodeLine{00266\ \ \ \doxymbox{\hyperlink{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}{playPattern}}(\doxymbox{\hyperlink{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03}{deniedTimings}},}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03}{deniedTimings}})\ /\ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03}{deniedTimings}}[0]));}
\DoxyCodeLine{00268\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00136}{denied\+Timings}}, \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=275pt]{esp3_8ino_a04bf0803eb139c30e08775daa9076ea6_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f}\index{esp3.ino@{esp3.ino}!playLockSound@{playLockSound}}
\index{playLockSound@{playLockSound}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{playLockSound()}{playLockSound()}}
{\footnotesize\ttfamily \label{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f} 
void play\+Lock\+Sound (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Plays lock sound pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00250}{250}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00251\ \ \ \doxymbox{\hyperlink{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}{stopBuzzer}}();}
\DoxyCodeLine{00252\ \ \ \doxymbox{\hyperlink{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}{playPattern}}(\doxymbox{\hyperlink{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb}{lockTimings}},}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb}{lockTimings}})\ /\ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb}{lockTimings}}[0]));}
\DoxyCodeLine{00254\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00141}{lock\+Timings}}, \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{esp3_8ino_a4da2553f00d22f892f2fe8ee47e9db9f_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}\index{esp3.ino@{esp3.ino}!playPattern@{playPattern}}
\index{playPattern@{playPattern}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{playPattern()}{playPattern()}}
{\footnotesize\ttfamily \label{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932} 
void play\+Pattern (\begin{DoxyParamCaption}\item[{const unsigned int \texorpdfstring{$\ast$}{*}}]{timings}{, }\item[{uint8\+\_\+t}]{length}{}\end{DoxyParamCaption})}



Starts playing a buzzer pattern. 


\begin{DoxyParams}{Parameters}
{\em timings} & Pointer to timing array. \\
\hline
{\em length} & Number of elements in the timing array. \\
\hline
\end{DoxyParams}


Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00193}{193}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{comment}{//\ Prevent\ overlapping\ sound\ patterns}}
\DoxyCodeLine{00196\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ !=\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\_IDLE}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \doxymbox{\hyperlink{esp3_8ino_a3968694cac10b831396197bf7627d45c}{currentPattern}}.timings\ =\ timings;}
\DoxyCodeLine{00199\ \ \ \doxymbox{\hyperlink{esp3_8ino_a3968694cac10b831396197bf7627d45c}{currentPattern}}.length\ \ =\ length;}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \doxymbox{\hyperlink{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}{stepIndex}}\ \ \ =\ 0;}
\DoxyCodeLine{00202\ \ \ \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ =\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}{BUZZER\_ON}};}
\DoxyCodeLine{00203\ \ \ \doxymbox{\hyperlink{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab}{lastChange}}\ \ =\ millis();}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ HIGH);\ \ \textcolor{comment}{//\ Start\ with\ buzzer\ ON}}
\DoxyCodeLine{00206\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00162}{BUZZER\+\_\+\+IDLE}}, \doxymbox{\hyperlink{esp3_8ino_source_l00163}{BUZZER\+\_\+\+ON}}, \doxymbox{\hyperlink{esp3_8ino_source_l00076}{BUZZER\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00176}{buzzer\+State}}, \doxymbox{\hyperlink{esp3_8ino_source_l00179}{current\+Pattern}}, \doxymbox{\hyperlink{esp3_8ino_source_l00185}{last\+Change}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00182}{step\+Index}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00264}{play\+Denied\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00250}{play\+Lock\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00271}{play\+Tap\+Sound()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00257}{play\+Unlock\+Sound()}}.

Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100}\index{esp3.ino@{esp3.ino}!playTapSound@{playTapSound}}
\index{playTapSound@{playTapSound}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{playTapSound()}{playTapSound()}}
{\footnotesize\ttfamily \label{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100} 
void play\+Tap\+Sound (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Plays keypad tap sound. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00271}{271}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \doxymbox{\hyperlink{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}{stopBuzzer}}();}
\DoxyCodeLine{00273\ \ \ \doxymbox{\hyperlink{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}{playPattern}}(\doxymbox{\hyperlink{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd}{beepTimings}},}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd}{beepTimings}})\ /\ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd}{beepTimings}}[0]));}
\DoxyCodeLine{00275\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00154}{beep\+Timings}}, \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=272pt]{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=257pt]{esp3_8ino_a0f76dd1d3c15f21fc5dd0d4536f4c100_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a979598b64139705fd13eb4ea50e0674c}\index{esp3.ino@{esp3.ino}!playUnlockSound@{playUnlockSound}}
\index{playUnlockSound@{playUnlockSound}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{playUnlockSound()}{playUnlockSound()}}
{\footnotesize\ttfamily \label{esp3_8ino_a979598b64139705fd13eb4ea50e0674c} 
void play\+Unlock\+Sound (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Plays unlock sound pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00257}{257}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \doxymbox{\hyperlink{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}{stopBuzzer}}();}
\DoxyCodeLine{00259\ \ \ \doxymbox{\hyperlink{esp3_8ino_a89ff5d59e14a11256f4dd5c82602f932}{playPattern}}(\doxymbox{\hyperlink{esp3_8ino_af8884950ef523ca854f256d016cfaf29}{unlockTimings}},}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_af8884950ef523ca854f256d016cfaf29}{unlockTimings}})\ /\ \textcolor{keyword}{sizeof}(\doxymbox{\hyperlink{esp3_8ino_af8884950ef523ca854f256d016cfaf29}{unlockTimings}}[0]));}
\DoxyCodeLine{00261\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00148}{unlock\+Timings}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{esp3_8ino_a979598b64139705fd13eb4ea50e0674c_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=274pt]{esp3_8ino_a979598b64139705fd13eb4ea50e0674c_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{esp3.ino@{esp3.ino}!setup@{setup}}
\index{setup@{setup}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{esp3_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Arduino setup function. 

Initializes GPIOs, servo, Wi\+Fi, MQTT client, and topic subscriptions. 

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00423}{423}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ pinMode(\doxymbox{\hyperlink{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}{RED\_PIN}},\ OUTPUT);}
\DoxyCodeLine{00426\ \ \ pinMode(\doxymbox{\hyperlink{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}{GREEN\_PIN}},\ OUTPUT);}
\DoxyCodeLine{00427\ \ \ pinMode(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ OUTPUT);}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\_servo}}.attach(\doxymbox{\hyperlink{esp3_8ino_a98714b3ea5db9fa78cbcf8891a3c0798}{SERVO\_PIN}});}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ \ \ \textcolor{comment}{//\ Initialize\ outputs\ to\ safe\ state}}
\DoxyCodeLine{00432\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}{RED\_PIN}},\ LOW);}
\DoxyCodeLine{00433\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}{GREEN\_PIN}},\ LOW);}
\DoxyCodeLine{00434\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ LOW);}
\DoxyCodeLine{00435\ \ \ \doxymbox{\hyperlink{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}{lock\_servo}}.write(0);\ \ \textcolor{comment}{//\ Locked\ position}}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \doxymbox{\hyperlink{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}{servoAngle}}\ =\ 0;}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00439\ \ \ delay(100);}
\DoxyCodeLine{00440\ \ \ Serial.begin(115200);}
\DoxyCodeLine{00441\ }
\DoxyCodeLine{00442\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.begin(}
\DoxyCodeLine{00443\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_ae4ee394ecd24781bba5d0aaaab8e964a}{WIFI\_SSID}},}
\DoxyCodeLine{00444\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a0495958e0c537c1c5100ee272495435c}{WIFI\_PASS}},}
\DoxyCodeLine{00445\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a41c34e432b12a511f9348547ddae11d4}{MQTT\_HOST}},}
\DoxyCodeLine{00446\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a993a7e0c0377e10146438ebe707f31d0}{MQTT\_PORT}},}
\DoxyCodeLine{00447\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a315cd313c3f6301b48d2f67e63bec2db}{MQTT\_USER}},}
\DoxyCodeLine{00448\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a31dacdc924feb376b49448eb843d053c}{MQTT\_PASS}},}
\DoxyCodeLine{00449\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a04ecc29c762e5b2844d3c24744813015}{DEVICE\_ID}},}
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{stringliteral}{"{}site1"{}}}
\DoxyCodeLine{00451\ \ \ );}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ Serial.println(\textcolor{stringliteral}{"{}WiFi\ \&\ MQTT\ ready"{}});}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.setCallback(\doxymbox{\hyperlink{esp1__rfid__motion_8ino_ac3a129f66dc859e2b7279565f4e1de78}{callback}});}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \textcolor{comment}{//\ Subscribe\ to\ required\ MQTT\ topics}}
\DoxyCodeLine{00458\ \ \ Serial.printf(\textcolor{stringliteral}{"{}access/response\ MQTT\ subscribe\ \%s\(\backslash\)n"{}},}
\DoxyCodeLine{00459\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.subscribe(\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}access/response"{}}).c\_str())\ ?\ \textcolor{stringliteral}{"{}OK"{}}\ :\ \textcolor{stringliteral}{"{}FAILED"{}});}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ Serial.printf(\textcolor{stringliteral}{"{}access/keypad\_response\ MQTT\ subscribe\ \%s\(\backslash\)n"{}},}
\DoxyCodeLine{00462\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.subscribe(\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}access/keypad\_response"{}}).c\_str())\ ?\ \textcolor{stringliteral}{"{}OK"{}}\ :\ \textcolor{stringliteral}{"{}FAILED"{}});}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ Serial.printf(\textcolor{stringliteral}{"{}keypad/beep\ MQTT\ subscribe\ \%s\(\backslash\)n"{}},}
\DoxyCodeLine{00465\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.subscribe(\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}keypad/beep"{}}).c\_str())\ ?\ \textcolor{stringliteral}{"{}OK"{}}\ :\ \textcolor{stringliteral}{"{}FAILED"{}});}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ Serial.printf(\textcolor{stringliteral}{"{}admin/servo\_control\ MQTT\ subscribe\ \%s\(\backslash\)n"{}},}
\DoxyCodeLine{00468\ \ \ \ \ \doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.subscribe(\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}{net}}.makeTopic(\textcolor{stringliteral}{"{}admin/servo\_control"{}}).c\_str())\ ?\ \textcolor{stringliteral}{"{}OK"{}}\ :\ \textcolor{stringliteral}{"{}FAILED"{}});}
\DoxyCodeLine{00469\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00076}{BUZZER\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00250}{callback()}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00070}{DEVICE\+\_\+\+ID}}, \doxymbox{\hyperlink{esp3_8ino_source_l00075}{GREEN\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00114}{lock\+\_\+servo}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00061}{MQTT\+\_\+\+HOST}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00067}{MQTT\+\_\+\+PASS}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00063}{MQTT\+\_\+\+PORT}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00065}{MQTT\+\_\+\+USER}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00053}{net}}, \doxymbox{\hyperlink{esp3_8ino_source_l00074}{RED\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00077}{SERVO\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00120}{servo\+Angle}}, \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00058}{WIFI\+\_\+\+PASS}}, and \doxymbox{\hyperlink{esp1__rfid__motion_8ino_source_l00056}{WIFI\+\_\+\+SSID}}.

Here is the call graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino_a4fc01d736fe50cf5b977f755b675f11d_cgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7}\index{esp3.ino@{esp3.ino}!stopBuzzer@{stopBuzzer}}
\index{stopBuzzer@{stopBuzzer}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{stopBuzzer()}{stopBuzzer()}}
{\footnotesize\ttfamily \label{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7} 
void stop\+Buzzer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Immediately stops any active buzzer sound. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00244}{244}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00245\ \ \ \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ =\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\_IDLE}};}
\DoxyCodeLine{00246\ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ LOW);}
\DoxyCodeLine{00247\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00162}{BUZZER\+\_\+\+IDLE}}, \doxymbox{\hyperlink{esp3_8ino_source_l00076}{BUZZER\+\_\+\+PIN}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00176}{buzzer\+State}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00264}{play\+Denied\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00250}{play\+Lock\+Sound()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00271}{play\+Tap\+Sound()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00257}{play\+Unlock\+Sound()}}.

Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{esp3_8ino_a95513a5e9cc3b574afa284a38c77d6e7_icgraph}
\end{center}
\end{figure}
\Hypertarget{esp3_8ino_a312e25f84437a687662bb53eceebec83}\index{esp3.ino@{esp3.ino}!updateBuzzer@{updateBuzzer}}
\index{updateBuzzer@{updateBuzzer}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{updateBuzzer()}{updateBuzzer()}}
{\footnotesize\ttfamily \label{esp3_8ino_a312e25f84437a687662bb53eceebec83} 
void update\+Buzzer (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Advances the buzzer state machine. 

Must be called frequently from the main loop. 

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00213}{213}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ ==\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\_IDLE}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ now\ =\ millis();}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \textcolor{comment}{//\ Wait\ until\ current\ timing\ interval\ expires}}
\DoxyCodeLine{00219\ \ \ \textcolor{keywordflow}{if}\ (now\ -\/\ \doxymbox{\hyperlink{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab}{lastChange}}\ <\ \doxymbox{\hyperlink{esp3_8ino_a3968694cac10b831396197bf7627d45c}{currentPattern}}.timings[\doxymbox{\hyperlink{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}{stepIndex}}])\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \doxymbox{\hyperlink{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab}{lastChange}}\ =\ now;}
\DoxyCodeLine{00222\ \ \ \doxymbox{\hyperlink{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}{stepIndex}}++;}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \textcolor{comment}{//\ End\ of\ pattern\ reached}}
\DoxyCodeLine{00225\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}{stepIndex}}\ >=\ \doxymbox{\hyperlink{esp3_8ino_a3968694cac10b831396197bf7627d45c}{currentPattern}}.length)\ \{}
\DoxyCodeLine{00226\ \ \ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ LOW);}
\DoxyCodeLine{00227\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ =\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\_IDLE}};}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00229\ \ \ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \textcolor{comment}{//\ Toggle\ buzzer\ state}}
\DoxyCodeLine{00232\ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ ==\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}{BUZZER\_ON}})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ LOW);}
\DoxyCodeLine{00234\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ =\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a6fd00a9b64a658134b21162400027a68}{BUZZER\_OFF}};}
\DoxyCodeLine{00235\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00236\ \ \ \ \ digitalWrite(\doxymbox{\hyperlink{esp3_8ino_afbe2629cea08969000cef8d30978edd8}{BUZZER\_PIN}},\ HIGH);}
\DoxyCodeLine{00237\ \ \ \ \ \doxymbox{\hyperlink{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}{buzzerState}}\ =\ \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176a5435ccab40fb29ad3420e7ffdecac65c}{BUZZER\_ON}};}
\DoxyCodeLine{00238\ \ \ \}}
\DoxyCodeLine{00239\ \}}

\end{DoxyCode}


References \doxymbox{\hyperlink{esp3_8ino_source_l00162}{BUZZER\+\_\+\+IDLE}}, \doxymbox{\hyperlink{esp3_8ino_source_l00164}{BUZZER\+\_\+\+OFF}}, \doxymbox{\hyperlink{esp3_8ino_source_l00163}{BUZZER\+\_\+\+ON}}, \doxymbox{\hyperlink{esp3_8ino_source_l00076}{BUZZER\+\_\+\+PIN}}, \doxymbox{\hyperlink{esp3_8ino_source_l00176}{buzzer\+State}}, \doxymbox{\hyperlink{esp3_8ino_source_l00179}{current\+Pattern}}, \doxymbox{\hyperlink{esp3_8ino_source_l00185}{last\+Change}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00182}{step\+Index}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

Here is the caller graph for this function:\+\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{esp3_8ino_a312e25f84437a687662bb53eceebec83_icgraph}
\end{center}
\end{figure}


\label{doc-var-members}
\Hypertarget{esp3_8ino_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{esp3_8ino_a39d1ef76cb1d31fc16d855c63df5624a}\index{esp3.ino@{esp3.ino}!accessGranted@{accessGranted}}
\index{accessGranted@{accessGranted}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{accessGranted}{accessGranted}}
{\footnotesize\ttfamily \label{esp3_8ino_a39d1ef76cb1d31fc16d855c63df5624a} 
\doxymbox{\hyperlink{esp1__rfid__motion_8ino_a6a8b3b75b2ade421c119d83a8b2133f1}{Access\+Result}} access\+Granted}



Result of keypad PIN verification. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00108}{108}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e}\index{esp3.ino@{esp3.ino}!adminServoControl@{adminServoControl}}
\index{adminServoControl@{adminServoControl}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{adminServoControl}{adminServoControl}}
{\footnotesize\ttfamily \label{esp3_8ino_acb368e6741d7e5d5fb51f384f3ef6c5e} 
bool admin\+Servo\+Control = false}



Enables direct servo control via potentiometer (admin mode). 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00123}{123}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

\Hypertarget{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd}\index{esp3.ino@{esp3.ino}!beepTimings@{beepTimings}}
\index{beepTimings@{beepTimings}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{beepTimings}{beepTimings}}
{\footnotesize\ttfamily \label{esp3_8ino_acf6a49719a118eac7c9f54b4351977fd} 
const unsigned int beep\+Timings\+[$\,$]\+}

{\bfseries Initial value:\+}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{}
\DoxyCodeLine{\ \ 125}
\DoxyCodeLine{\}}

\end{DoxyCode}


Keypad tap sound:\+ short beep. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00154}{154}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00155\ \ \ 125}
\DoxyCodeLine{00156\ \};}

\end{DoxyCode}


Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00271}{play\+Tap\+Sound()}}.

\Hypertarget{esp3_8ino_afbe2629cea08969000cef8d30978edd8}\index{esp3.ino@{esp3.ino}!BUZZER\_PIN@{BUZZER\_PIN}}
\index{BUZZER\_PIN@{BUZZER\_PIN}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{BUZZER\_PIN}{BUZZER\_PIN}}
{\footnotesize\ttfamily \label{esp3_8ino_afbe2629cea08969000cef8d30978edd8} 
uint8\+\_\+t BUZZER\+\_\+\+PIN = 14\hspace{0.3cm}{\ttfamily [constexpr]}}



Piezo buzzer. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00076}{76}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

\Hypertarget{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd}\index{esp3.ino@{esp3.ino}!buzzerState@{buzzerState}}
\index{buzzerState@{buzzerState}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{buzzerState}{buzzerState}}
{\footnotesize\ttfamily \label{esp3_8ino_a83ec3e49d3b2d7a5b3d7e24776ed94dd} 
\doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176}{Buzzer\+State}} buzzer\+State = \doxymbox{\hyperlink{esp3_8ino_ae3c5be103282ee46f635819ae28c1176ad32089a6564a38159e66921ddece6ebd}{BUZZER\+\_\+\+IDLE}}}



Current buzzer state. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00176}{176}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00244}{stop\+Buzzer()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

\Hypertarget{esp3_8ino_a3968694cac10b831396197bf7627d45c}\index{esp3.ino@{esp3.ino}!currentPattern@{currentPattern}}
\index{currentPattern@{currentPattern}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{currentPattern}{currentPattern}}
{\footnotesize\ttfamily \label{esp3_8ino_a3968694cac10b831396197bf7627d45c} 
\doxymbox{\hyperlink{esp3_8ino_structBuzzerPattern}{Buzzer\+Pattern}} current\+Pattern = \{nullptr, 0\}}



Currently active buzzer pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00179}{179}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00179\ \{\textcolor{keyword}{nullptr},\ 0\};}

\end{DoxyCode}


Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

\Hypertarget{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03}\index{esp3.ino@{esp3.ino}!deniedTimings@{deniedTimings}}
\index{deniedTimings@{deniedTimings}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{deniedTimings}{deniedTimings}}
{\footnotesize\ttfamily \label{esp3_8ino_a2bba129d79cf6951bff6c7931dee6f03} 
const unsigned int denied\+Timings\+[$\,$]\+}

{\bfseries Initial value:\+}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{}
\DoxyCodeLine{\ \ 2000}
\DoxyCodeLine{\}}

\end{DoxyCode}


Denied access:\+ single long beep. 

Extra long to scare 

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00136}{136}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00137\ \ \ 2000}
\DoxyCodeLine{00138\ \};}

\end{DoxyCode}


Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00264}{play\+Denied\+Sound()}}.

\Hypertarget{esp3_8ino_a04ecc29c762e5b2844d3c24744813015}\index{esp3.ino@{esp3.ino}!DEVICE\_ID@{DEVICE\_ID}}
\index{DEVICE\_ID@{DEVICE\_ID}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{DEVICE\_ID}{DEVICE\_ID}}
{\footnotesize\ttfamily \label{esp3_8ino_a04ecc29c762e5b2844d3c24744813015} 
char DEVICE\+\_\+\+ID\+[$\,$]\+ = "{}door1"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



Unique device identifier used in MQTT topics. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00063}{63}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2}\index{esp3.ino@{esp3.ino}!GREEN\_PIN@{GREEN\_PIN}}
\index{GREEN\_PIN@{GREEN\_PIN}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{GREEN\_PIN}{GREEN\_PIN}}
{\footnotesize\ttfamily \label{esp3_8ino_ad779a2a8a81b39a265a6361f7edf06f2} 
uint8\+\_\+t GREEN\+\_\+\+PIN = 0\hspace{0.3cm}{\ttfamily [constexpr]}}



Green LED (unlocked). 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00075}{75}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}.

\Hypertarget{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab}\index{esp3.ino@{esp3.ino}!lastChange@{lastChange}}
\index{lastChange@{lastChange}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{lastChange}{lastChange}}
{\footnotesize\ttfamily \label{esp3_8ino_aeaa41d0f25d6ba9737d73ffa5136f4ab} 
unsigned long last\+Change = 0}



Timestamp of last buzzer state change. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00185}{185}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

\Hypertarget{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08}\index{esp3.ino@{esp3.ino}!lock\_servo@{lock\_servo}}
\index{lock\_servo@{lock\_servo}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{lock\_servo}{lock\_servo}}
{\footnotesize\ttfamily \label{esp3_8ino_a7d2ca4784fdea2b5e9ac6f9ac738ef08} 
Servo lock\+\_\+servo}



Servo instance controlling the lock mechanism. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00114}{114}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}.

\Hypertarget{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb}\index{esp3.ino@{esp3.ino}!lockTimings@{lockTimings}}
\index{lockTimings@{lockTimings}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{lockTimings}{lockTimings}}
{\footnotesize\ttfamily \label{esp3_8ino_a7dafde6b11d0e61269d5b5326deee7cb} 
const unsigned int lock\+Timings\+[$\,$]\+}

{\bfseries Initial value:\+}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{}
\DoxyCodeLine{\ \ 250,\ 120,}
\DoxyCodeLine{\ \ 250,\ 120,}
\DoxyCodeLine{\ \ 250}
\DoxyCodeLine{\}}

\end{DoxyCode}


Lock sound:\+ long-\/long-\/long pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00141}{141}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00142\ \ \ 250,\ 120,}
\DoxyCodeLine{00143\ \ \ 250,\ 120,}
\DoxyCodeLine{00144\ \ \ 250}
\DoxyCodeLine{00145\ \};}

\end{DoxyCode}


Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00250}{play\+Lock\+Sound()}}.

\Hypertarget{esp3_8ino_a41c34e432b12a511f9348547ddae11d4}\index{esp3.ino@{esp3.ino}!MQTT\_HOST@{MQTT\_HOST}}
\index{MQTT\_HOST@{MQTT\_HOST}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{MQTT\_HOST}{MQTT\_HOST}}
{\footnotesize\ttfamily \label{esp3_8ino_a41c34e432b12a511f9348547ddae11d4} 
char MQTT\+\_\+\+HOST\+[$\,$]\+ = "{}maqiatto.\+com"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



MQTT broker hostname. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00054}{54}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a31dacdc924feb376b49448eb843d053c}\index{esp3.ino@{esp3.ino}!MQTT\_PASS@{MQTT\_PASS}}
\index{MQTT\_PASS@{MQTT\_PASS}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{MQTT\_PASS}{MQTT\_PASS}}
{\footnotesize\ttfamily \label{esp3_8ino_a31dacdc924feb376b49448eb843d053c} 
char MQTT\+\_\+\+PASS\+[$\,$]\+ = "{}potter"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



MQTT password. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00060}{60}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a993a7e0c0377e10146438ebe707f31d0}\index{esp3.ino@{esp3.ino}!MQTT\_PORT@{MQTT\_PORT}}
\index{MQTT\_PORT@{MQTT\_PORT}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{MQTT\_PORT}{MQTT\_PORT}}
{\footnotesize\ttfamily \label{esp3_8ino_a993a7e0c0377e10146438ebe707f31d0} 
uint16\+\_\+t MQTT\+\_\+\+PORT = 1883\hspace{0.3cm}{\ttfamily [constexpr]}}



MQTT broker port. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00056}{56}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a315cd313c3f6301b48d2f67e63bec2db}\index{esp3.ino@{esp3.ino}!MQTT\_USER@{MQTT\_USER}}
\index{MQTT\_USER@{MQTT\_USER}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{MQTT\_USER}{MQTT\_USER}}
{\footnotesize\ttfamily \label{esp3_8ino_a315cd313c3f6301b48d2f67e63bec2db} 
char MQTT\+\_\+\+USER\+[$\,$]\+ = "{}hectorfoss@gmail.\+com"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



MQTT username. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00058}{58}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0}\index{esp3.ino@{esp3.ino}!net@{net}}
\index{net@{net}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{net}{net}}
{\footnotesize\ttfamily \label{esp3_8ino_a082cbde9dbf32731aabec6f0b8a7e5c0} 
Wifi\+Mqtt\+Client net}



Wi\+Fi + MQTT client wrapper. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00046}{46}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80}\index{esp3.ino@{esp3.ino}!RED\_PIN@{RED\_PIN}}
\index{RED\_PIN@{RED\_PIN}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{RED\_PIN}{RED\_PIN}}
{\footnotesize\ttfamily \label{esp3_8ino_a1ff3e63b5caeb625ff113a8190b24c80} 
uint8\+\_\+t RED\+\_\+\+PIN = 4\hspace{0.3cm}{\ttfamily [constexpr]}}



GPIO pin assignments. 

Refer to esp3.\+fzz for wiring details. Red LED (locked /\+ denied) 

Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00074}{74}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}.

\Hypertarget{esp3_8ino_a037a56ba222296920d6e0f06796e9f21}\index{esp3.ino@{esp3.ino}!rfidAccess@{rfidAccess}}
\index{rfidAccess@{rfidAccess}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{rfidAccess}{rfidAccess}}
{\footnotesize\ttfamily \label{esp3_8ino_a037a56ba222296920d6e0f06796e9f21} 
bool rfid\+Access = false}



Indicates whether RFID access was granted. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00111}{111}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a98714b3ea5db9fa78cbcf8891a3c0798}\index{esp3.ino@{esp3.ino}!SERVO\_PIN@{SERVO\_PIN}}
\index{SERVO\_PIN@{SERVO\_PIN}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{SERVO\_PIN}{SERVO\_PIN}}
{\footnotesize\ttfamily \label{esp3_8ino_a98714b3ea5db9fa78cbcf8891a3c0798} 
uint8\+\_\+t SERVO\+\_\+\+PIN = 13\hspace{0.3cm}{\ttfamily [constexpr]}}



Servo signal pin. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00077}{77}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}.

\Hypertarget{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e}\index{esp3.ino@{esp3.ino}!servoAngle@{servoAngle}}
\index{servoAngle@{servoAngle}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{servoAngle}{servoAngle}}
{\footnotesize\ttfamily \label{esp3_8ino_a9382f70e6b3786d1e4c31a325939561e} 
uint8\+\_\+t servo\+Angle}



Current servo angle (derived from potentiometer in admin mode). 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00120}{120}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00423}{setup()}}.

\Hypertarget{esp3_8ino_ac981a10fb220aee90291389b2607c637}\index{esp3.ino@{esp3.ino}!servoOpen@{servoOpen}}
\index{servoOpen@{servoOpen}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{servoOpen}{servoOpen}}
{\footnotesize\ttfamily \label{esp3_8ino_ac981a10fb220aee90291389b2607c637} 
bool servo\+Open = false}



Indicates whether the servo is currently in the open position. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00117}{117}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}.

\Hypertarget{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb}\index{esp3.ino@{esp3.ino}!stepIndex@{stepIndex}}
\index{stepIndex@{stepIndex}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{stepIndex}{stepIndex}}
{\footnotesize\ttfamily \label{esp3_8ino_ad0d2a31b1a102cbb8a415773c47b01bb} 
uint8\+\_\+t step\+Index = 0}



Index into the timing array. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00182}{182}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00193}{play\+Pattern()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00213}{update\+Buzzer()}}.

\Hypertarget{esp3_8ino_a6d6d37a1e68b6dcd10e646ed685f6f5e}\index{esp3.ino@{esp3.ino}!UNLOCK\_TIME\_MS@{UNLOCK\_TIME\_MS}}
\index{UNLOCK\_TIME\_MS@{UNLOCK\_TIME\_MS}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{UNLOCK\_TIME\_MS}{UNLOCK\_TIME\_MS}}
{\footnotesize\ttfamily \label{esp3_8ino_a6d6d37a1e68b6dcd10e646ed685f6f5e} 
uint32\+\_\+t UNLOCK\+\_\+\+TIME\+\_\+\+MS = 5000\hspace{0.3cm}{\ttfamily [constexpr]}}



Door unlock duration (ms). 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00087}{87}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5}\index{esp3.ino@{esp3.ino}!unlocked@{unlocked}}
\index{unlocked@{unlocked}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{unlocked}{unlocked}}
{\footnotesize\ttfamily \label{esp3_8ino_a5284d36e95aca49afcb3ae1ecc97add5} 
bool unlocked = false}



Indicates whether the door is currently unlocked. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00097}{97}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, \doxymbox{\hyperlink{esp3_8ino_source_l00288}{force\+Lock()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

\Hypertarget{esp3_8ino_af8884950ef523ca854f256d016cfaf29}\index{esp3.ino@{esp3.ino}!unlockTimings@{unlockTimings}}
\index{unlockTimings@{unlockTimings}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{unlockTimings}{unlockTimings}}
{\footnotesize\ttfamily \label{esp3_8ino_af8884950ef523ca854f256d016cfaf29} 
const unsigned int unlock\+Timings\+[$\,$]\+}

{\bfseries Initial value:\+}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \{}
\DoxyCodeLine{\ \ 125,\ 120,}
\DoxyCodeLine{\ \ 125}
\DoxyCodeLine{\}}

\end{DoxyCode}


Unlock sound:\+ short-\/short pattern. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00148}{148}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00149\ \ \ 125,\ 120,}
\DoxyCodeLine{00150\ \ \ 125}
\DoxyCodeLine{00151\ \};}

\end{DoxyCode}


Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00257}{play\+Unlock\+Sound()}}.

\Hypertarget{esp3_8ino_a744e7cb284580272a7afb8a81f2a3bba}\index{esp3.ino@{esp3.ino}!unlockUntil@{unlockUntil}}
\index{unlockUntil@{unlockUntil}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{unlockUntil}{unlockUntil}}
{\footnotesize\ttfamily \label{esp3_8ino_a744e7cb284580272a7afb8a81f2a3bba} 
uint32\+\_\+t unlock\+Until = 0}



Timestamp (ms) until which the door remains unlocked. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00090}{90}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.



Referenced by \doxymbox{\hyperlink{esp3_8ino_source_l00318}{callback()}}, and \doxymbox{\hyperlink{esp3_8ino_source_l00484}{loop()}}.

\Hypertarget{esp3_8ino_a0495958e0c537c1c5100ee272495435c}\index{esp3.ino@{esp3.ino}!WIFI\_PASS@{WIFI\_PASS}}
\index{WIFI\_PASS@{WIFI\_PASS}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{WIFI\_PASS}{WIFI\_PASS}}
{\footnotesize\ttfamily \label{esp3_8ino_a0495958e0c537c1c5100ee272495435c} 
char WIFI\+\_\+\+PASS\+[$\,$]\+ = "{}mrbombasticcallmefantastic"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



Wi\+Fi password. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00051}{51}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

\Hypertarget{esp3_8ino_ae4ee394ecd24781bba5d0aaaab8e964a}\index{esp3.ino@{esp3.ino}!WIFI\_SSID@{WIFI\_SSID}}
\index{WIFI\_SSID@{WIFI\_SSID}!esp3.ino@{esp3.ino}}
\doxysubsubsection{\texorpdfstring{WIFI\_SSID}{WIFI\_SSID}}
{\footnotesize\ttfamily \label{esp3_8ino_ae4ee394ecd24781bba5d0aaaab8e964a} 
char WIFI\+\_\+\+SSID\+[$\,$]\+ = "{}Mathias2.\+4"{}\hspace{0.3cm}{\ttfamily [constexpr]}}



Wi\+Fi SSID. 



Definition at line \doxymbox{\hyperlink{esp3_8ino_source_l00049}{49}} of file \doxymbox{\hyperlink{esp3_8ino_source}{esp3.\+ino}}.

